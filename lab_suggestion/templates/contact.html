{% extends 'base.html' %}

{% block title %}{% if is_booking %}Book Test - LabEase{% else %}Contact Us - LabEase{% endif %}{% endblock %}

{% block content %}
{% if is_booking %}
<!-- Streamlined Booking Page -->
<div class="min-h-[calc(100vh-200px)] py-8 px-4 sm:px-6 lg:px-8" style="background-color: #F3F4F6;">
    <div class="max-w-3xl mx-auto">
        <!-- Booking Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-xl mb-4" style="background-color: #2563EB;">
                <i class="fas fa-calendar-check text-white text-2xl"></i>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Book Your Test</h1>
            <p class="text-gray-600">Complete the form below to request your test booking</p>
        </div>

        <!-- Booking Details Card -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-gray-200">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-info-circle mr-2" style="color: #2563EB;"></i>Booking Details
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 rounded-lg" style="background-color: #F3F4F6;">
                    <p class="text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide">Test Name</p>
                    <p class="text-lg font-bold text-gray-800">{{ test_name }}</p>
                </div>
                <div class="p-4 rounded-lg" style="background-color: #F3F4F6;">
                    <p class="text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide">Laboratory</p>
                    <p class="text-lg font-bold text-gray-800">{{ lab_name }}</p>
                </div>
            </div>
        </div>

        <!-- Booking Form -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border border-gray-200">
            <form method="post" class="space-y-6">
                {% csrf_token %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for field in form %}
                        {% if field.name != 'message' and field.name != 'recipient_choice' %}
                            <div>
                                <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    {{ field.label }}
                                    {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                </label>
                                <input 
                                    type="{{ field.field.widget.input_type|default:'text' }}"
                                    id="{{ field.id_for_label }}"
                                    name="{{ field.name }}"
                                    value="{{ field.value|default:'' }}"
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    placeholder="{{ field.field.widget.attrs.placeholder|default:field.label }}"
                                    {% if field.field.required %}required{% endif %}>
                                {% if field.help_text %}
                                    <p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
                                {% endif %}
                                {% if field.errors %}
                                    <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>

                <!-- Hidden recipient field -->
                {% for field in form %}
                    {% if field.name == 'recipient_choice' %}
                        {{ field.as_hidden }}
                    {% endif %}
                {% endfor %}

                <!-- Message Field -->
                {% for field in form %}
                    {% if field.name == 'message' %}
                        <div>
                            <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                Additional Notes <span class="text-gray-500 font-normal">(Optional)</span>
                            </label>
                            <textarea 
                                id="{{ field.id_for_label }}"
                                name="{{ field.name }}"
                                rows="4"
                                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"
                                placeholder="Add any special requests, preferred dates, or notes for your booking...">{{ field.value|default:'' }}</textarea>
                            {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}
                
                <div class="pt-4">
                    <button type="submit" class="w-full px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all transform hover:scale-[1.02] shadow-lg font-semibold text-lg flex items-center justify-center">
                        <i class="fas fa-calendar-check mr-2"></i>Submit Booking Request
                    </button>
                </div>
            </form>
        </div>

        <!-- Help Text -->
        <div class="mt-6 text-center">
            <p class="text-sm text-gray-600">
                <i class="fas fa-info-circle mr-1"></i>
                The lab will contact you shortly to confirm your booking
            </p>
        </div>
    </div>
</div>

{% else %}
<!-- Regular Contact Page -->
<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Hero Section -->
    <div class="text-center mb-16">
        <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-6" style="background-color: #2563EB;">
            <i class="fas fa-envelope text-white text-3xl"></i>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
            We're Here to <span style="color: #2563EB;">Help</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Our team is dedicated to providing you with the best possible support. Whether you have questions about our services, need assistance with your account, or want to provide feedback, we're here to listen and help.
        </p>
    </div>

    <div class="max-w-6xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Contact Form -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: #2563EB;">
                            <i class="fas fa-paper-plane text-white text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800">Get in Touch</h2>
                    </div>
                    
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in form %}
                                {% if field.name != 'message' and field.name != 'recipient_choice' and field.name != 'lab' and field.name != 'recipient_admin' %}
                                    <div>
                                        <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                            {{ field.label }}
                                            {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                        </label>
                                        <input 
                                            type="{{ field.field.widget.input_type|default:'text' }}"
                                            id="{{ field.id_for_label }}"
                                            name="{{ field.name }}"
                                            value="{{ field.value|default:'' }}"
                                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                            placeholder="{{ field.field.widget.attrs.placeholder|default:field.label }}"
                                            {% if field.field.required %}required{% endif %}>
                                        {% if field.help_text %}
                                            <p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
                                        {% endif %}
                                        {% if field.errors %}
                                            <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            {% for field in form %}
                                {% if field.name == 'message' %}
                                    <div class="md:col-span-2">
                                        <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                            {{ field.label }}
                                            {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                        </label>
                                        <textarea 
                                            id="{{ field.id_for_label }}"
                                            name="{{ field.name }}"
                                            rows="5"
                                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"
                                            placeholder="{{ field.field.widget.attrs.placeholder|default:field.label }}"
                                            {% if field.field.required %}required{% endif %}>{{ field.value|default:'' }}</textarea>
                                        {% if field.errors %}
                                            <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            {% for field in form %}
                                {% if field.name == 'recipient_choice' %}
                                    <div class="md:col-span-2">
                                        <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                            {{ field.label }}
                                            {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                        </label>
                                        <select 
                                            id="{{ field.id_for_label }}"
                                            name="{{ field.name }}"
                                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                            {% if field.field.required %}required{% endif %}>
                                            {% for choice_value, choice_label in field.field.choices %}
                                                {% if choice_value %}
                                                    <option value="{{ choice_value }}" {% if field.value == choice_value %}selected{% endif %}>{{ choice_label }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                        {% if field.errors %}
                                            <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            {% for field in form %}
                                {% if field.name == 'lab' or field.name == 'recipient_admin' %}
                                    {{ field.as_hidden }}
                                {% endif %}
                            {% endfor %}
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" class="w-full px-8 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all transform hover:scale-105 shadow-lg font-semibold text-lg">
                                <i class="fas fa-paper-plane mr-2"></i>Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="space-y-6">
                <!-- Address Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-100 hover:shadow-2xl transition-all transform hover:-translate-y-1">
                    <div class="flex items-start space-x-4">
                        <div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background-color: #10B981;">
                            <i class="fas fa-map-marker-alt text-white text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800 mb-1">Address</h3>
                            <p class="text-gray-600">Maitidevi, Kathmandu</p>
                            <p class="text-gray-600">Nepal</p>
                        </div>
                    </div>
                </div>

                <!-- Phone Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-100 hover:shadow-2xl transition-all transform hover:-translate-y-1">
                    <div class="flex items-start space-x-4">
                        <div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background-color: #10B981;">
                            <i class="fas fa-phone text-white text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800 mb-1">Phone</h3>
                            <a href="tel:+9779876543210" class="text-blue-600 hover:text-blue-700 font-medium">
                                +977 9876543210
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Email Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-100 hover:shadow-2xl transition-all transform hover:-translate-y-1">
                    <div class="flex items-start space-x-4">
                        <div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background-color: #0891B2;">
                            <i class="fas fa-envelope text-white text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800 mb-1">Email</h3>
                            <a href="mailto:support@labease.com" class="text-blue-600 hover:text-blue-700 font-medium break-all">
                                support@labease.com
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Support Hours Card -->
                <div class="rounded-2xl shadow-xl p-6 border border-gray-200" style="background-color: #F3F4F6;">
                    <div class="flex items-start space-x-4">
                        <div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background-color: #0891B2;">
                            <i class="fas fa-clock text-white text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Support Hours</h3>
                            <p class="text-gray-600 text-sm mb-1">Monday - Friday</p>
                            <p class="text-gray-700 font-semibold">9:00 AM - 6:00 PM</p>
                            <p class="text-gray-600 text-sm mt-2">Saturday</p>
                            <p class="text-gray-700 font-semibold">10:00 AM - 4:00 PM</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
